services:
  pa3-env:
    # 基础镜像：Ubuntu 22.04
    image: ubuntu:22.04
    # 容器名称（指定为 pa3）
    container_name: pa3
    # 保持容器后台运行（避免启动后立即退出）
    tty: true
    # 挂载工作目录：将本地的 thss-2025-compiler/pa3 映射到容器内的 /root/pa3
    # 注意：路径需根据实际情况调整（若 docker-compose.yml 在 pa3 目录内，可简化为 ./:/root/pa3）
    volumes:
      - ./:/root/pa3 # 左侧为本地 pa3 目录路径，右侧为容器内路径
    # 禁用交互式配置（避免安装依赖时弹出交互窗口）
    environment:
      - DEBIAN_FRONTEND=noninteractive
    # 启动时自动安装所有依赖
    command: >
      bash -c "apt update && 
               apt install -y build-essential cmake git pkg-config python3 openjdk-11-jdk curl && 
               bash"
